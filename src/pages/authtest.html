<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Authentication System</title>
  <link rel="stylesheet" href="/src/css/auth.css">
</head>

<body>
  <div class="container">
    <div class="card">
      <h2>Rekisteröidy</h2>
      <p>
        Lisää käyttäjiä lomakkeen avulla. Lomake lisää uuden käyttäjän
        napsauttamalla "Lisää käyttäjä" -painiketta.
      </p>

      <pre>
POST http://localhost:3000/api/users
content-type: application/json

{
  "username": "Uusi käyttäjä",
  "password": "salakala",
  "email": "newuser@example.com"
}</pre>

      <form class="registerForm" method="post" onsubmit="return false;">
        <div class="form-group">
          <label for="username">Käyttäjänimi</label>
          <input
            id="username"
            type="text"
            name="username"
            placeholder="Käyttäjänimi"
          />
        </div>
        
        <div class="form-group">
          <label for="password">Salasana (vähintään 8 merkkiä)</label>
          <input
            id="password"
            type="password"
            name="password"
            placeholder="Salasana"
          />
          <small id="passwordHelp" class="form-text">Salasanan tulee olla vähintään 8 merkkiä pitkä</small>
        </div>
        
        <div class="form-group">
          <label for="email">Sähköposti</label>
          <input
            id="email"
            type="email"
            name="email"
            placeholder="Sähköposti"
          />
        </div>
        
        <input
          name="submit"
          type="submit"
          value="Lisää käyttäjä"
          class="postuser"
        />
      </form>
      
      <div id="registerNotification" class="notification"></div>
    </div>

    <div class="card">
      <h2>Kirjaudu sisään</h2>
      
      <pre>
# Login
POST http://localhost:3000/api/auth/login
content-type: application/json

{
  "username": "user",
  "password": "secret"
}</pre>

      <form class="loginForm" method="post" onsubmit="return false;">
        <div class="form-group">
          <label for="login-username">Käyttäjänimi</label>
          <input id="login-username" type="text" name="username" placeholder="Käyttäjänimi" />
        </div>
        
        <div class="form-group">
          <label for="login-password">Salasana</label>
          <input
            id="login-password"
            type="password"
            name="password"
            placeholder="Salasana"
          />
        </div>
        
        <input
          name="submit"
          type="submit"
          value="Kirjaudu sisään"
          class="loginform"
        />
      </form>
      
      <div id="loginNotification" class="notification"></div>
    </div>

    <div class="card">
      <h2>Käyttäjätiedot</h2>
      
      <pre>
# Get user info by token (requires token)
GET http://localhost:3000/api/auth/me
Authorization: Bearer (put-user-token-here)</pre>

      <button id="meRequest">Tee autentikoitu pyyntö</button>
      <div id="meNotification" class="notification"></div>
    </div>

    <div class="card">
      <h2>Istunnon hallinta</h2>
      <button id="clearButton">Tyhjennä kirjautumistiedot</button>
      <div id="clearNotification" class="notification"></div>
      <div style="margin-top: 20px; text-align: center;">
        <a href="index.html" class="home-button">Takaisin etusivulle</a>
        <a href="diary.html" class="home-button">Tee päiväkirja merkintä</a>
      </div>
    </div>
  </div>

  <script type="module" src="/src/js/auth.js"></script>
</body>
</html>